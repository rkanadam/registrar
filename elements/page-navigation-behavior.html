<script>
    var PageNavigationBehavior = {
        properties: {
            selectedPage: {
                type: Object,
                observer: '_selectedPageChanged'
            },

            path: {
                type: String,
                observer: "_pathChanged",
                notify: true
            },

            pathHead: {
                type: String
            },

            pathTail: {
                type: String
            },

            selectedPageId: {
                type: String,
                notify: true
            },

            pageId: {
                type: String,
            }
        },

        _selectedPageChanged: function () {
            if (!this.selectedPage) {
                return;
            }
            this.selectedPage.set("path", this.pageTail);
            this.selectedPage.set("pageId", this.selectedPageId);
        },

        _pathChanged: function (path) {
            if (path === undefined || path === null) {
                return;
            }
            var parts = path.split("/");
            var selectedPageId = parts.shift();
            var tail = parts.join("/");
            this.set("selectedPageId", selectedPageId);
            this.set("pageTail", tail);
            if (this.selectedPage) {
                if (this.selectedPage.pageId === selectedPageId) {
                    this.selectedPage.set("path", tail);
                }
            }
        }
    };
    AppBehaviors.PageNavigationBehavior = PageNavigationBehavior;
</script>