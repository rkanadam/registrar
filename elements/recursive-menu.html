<dom-module id="recursive-menu">
    <template>
        <style is="custom-style" include="app-theme">
            /*
            paper-submenu.selected paper-item {
                font-weight: bold;
                background-color: var(--divider-color);
            }
            */
        </style>
        <paper-menu id="menu" attr-for-selected="id" selected-item="{{selectedPage}}" selected="[[selectedPageId]]"
                    selected-class="selected">
            <template is="dom-repeat" items="[[items]]" as="menu" id="template">
                <paper-item id="[[menu.id]]" class="menu-trigger">
                    <template is="dom-if" if="[[menu.icon]]">
                        <paper-icon-button icon="[[menu.icon]]"></paper-icon-button>
                    </template>
                    <a href="#[[menu.link]]" class="flex" style$="[[_menuPadding(depth)]]">
                        [[menu.label]]
                    </a>
                </paper-item>
                <template is="dom-if" if="[[_hasChildren(menu.children)]]">
                    <recursive-menu items="[[menu.children]]" depth="[[_childDepth(depth)]]"></recursive-menu>
                </template>
            </template>
        </paper-menu>
    </template>
    <script>
        Polymer({
            is: 'recursive-menu',

            properties: {
                items: {
                    type: Array,
                    value: function () {
                        return [];
                    }
                },

                depth: {
                    type: Number,
                    value: function () {
                        return 0;
                    }
                }
            },

            behaviors: [AppBehaviors.PageNavigationBehavior],

            _hasChildren: function (children) {
                return children && children.length > 0;
            },

            _childDepth: function (depth) {
                return depth + 1;
            },

            _menuPadding: function (depth) {
                return depth > 0 ? "padding-left: " + (depth * 20) + "px" : "";
            }
        });
    </script>
</dom-module>